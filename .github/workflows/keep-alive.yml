# Render free tier spins down after ~15 minutes of no traffic. Ping every 5 minutes so the
# instance never hits that threshold and stays awake (no cold start).
# Replace RENDER_APP_URL below with your real URL if different.
name: Keep Render alive
on:
  schedule:
    - cron: '*/5 * * * *'   # Every 5 minutes (well before 15-min sleep)
  workflow_dispatch:
env:
  RENDER_APP_URL: 'https://pet-emotion-detection.onrender.com'
jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping health endpoint
        run: |
          URL="${RENDER_APP_URL}/api/health"
          echo "Pinging $URL"
          curl -sf -w "\nHTTP %{http_code}\n" -o /dev/null "$URL" || true
